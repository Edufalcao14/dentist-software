scalar Email
scalar DateTime

enum DentistRole {
  Owner
  Admin
  hired
}

enum UserRole {
  dentist
  patient
}

type User {
  id: String!
  external_id: String
  email: Email!
  firstname: String!
  lastname: String!
  phone_number: String!
  role: UserRole!
}

type Me {
  id: String!
  displayName: String!
  email: Email!
  externalId: String!
  createdAt: DateTime!
  updatedAt: DateTime!
  deletedAt: DateTime
  teamId: String
  dentist: Dentist
  patient: Patient
}

type AuthTokens {
  accessToken: String!
  refreshToken: String!
  expiredAt: DateTime!
}

type AuthPayload {
  accessToken: String!
  refreshToken: String!
  user: User!
  patient: Patient
  dentist: Dentist
}

type Dentist {
  id: String!
  user_id: String!
  user: User!
  cro_number: String!
  specialization: String!
  role: String!
  is_active: Boolean!
  clinic_id: String
}

type Patient {
  id: String!
  user_id: String
  user: User
  cpf: String
  birthdate: DateTime!
  civil_state: String
}

type MedicalRecordRow {
  id: String!
  question: String!
  answer: String!
  medical_record_id: String!
  created_at: DateTime!
  updated_at: DateTime!
}

type MedicalRecord {
  id: String!
  patient_id: String!
  rows: [MedicalRecordRow!]!
  created_at: DateTime!
  updated_at: DateTime!
}

input CreateDentistInput {
  firstname: String!
  lastname: String!
  phone_number: String!
  email: Email!
  password: String!
  cro_number: String!
  specialization: String
  role: String
  is_active: Boolean!
  clinic_id: String
}

input UpdateDentistInput {
  firstname: String
  lastname: String
  phone_number: String
  email: Email
  cro_number: String
  specialization: String
  role: String
  is_active: Boolean
  clinic_id: String
}

input CreatePatientInput {
  email: Email
  firstname: String
  lastname: String
  phone_number: String
  cpf: String!
  birthdate: DateTime!
  civil_state: String
}

input RegisterPatientInput {
  email: Email!
  password: String!
  firstname: String!
  lastname: String!
  phone_number: String!
  cpf: String!
  birthdate: DateTime!
  civil_state: String
}

input UpdatePatientInput {
  cpf: String
  birthdate: DateTime
  civil_state: String
}

input CreateMedicalRecordRowInput {
  question: String!
  answer: String!
}

input CreateMedicalRecordInput {
  user_id: String!
  rows: [CreateMedicalRecordRowInput!]!
}

input UpdateMedicalRecordRowInput {
  id: String
  question: String!
  answer: String!
}

input UpdateMedicalRecordInput {
  rows: [UpdateMedicalRecordRowInput!]!
}

input SignInInput {
  email: Email!
  password: String!
}

input RefreshTokenInput {
  refreshToken: String!
}

type Query {
  _empty: String
  getDentistById(id: String!): Dentist!
  getDentistByEmail(email: Email!): Dentist!
  getPatientById(id: String!): Patient!
  getPatientByCpf(cpf: String!): Patient!
  getPatientByEmail(email: Email!): Patient!
  getAllPatients(limit: Int, offset: Int): [Patient!]!
  getMedicalRecordById(id: String!): MedicalRecord!
  getMedicalRecordByPatientId(patientId: String!): MedicalRecord!
  getMe: Me!
}

type Mutation {
  _empty: String
  createDentist(input: CreateDentistInput!): Dentist!
  updateDentist(id: String!, input: UpdateDentistInput!): Dentist!
  deleteDentist(id: String!): Dentist!
  createPatient(input: CreatePatientInput!): Patient!
  registerPatient(input: RegisterPatientInput!): AuthPayload!
  updatePatient(id: String!, input: UpdatePatientInput!): Patient!
  deletePatient(id: String!): Patient!
  createMedicalRecord(input: CreateMedicalRecordInput!): MedicalRecord!
  updateMedicalRecord(
    id: String!
    input: UpdateMedicalRecordInput!
  ): MedicalRecord!
  deleteMedicalRecord(id: String!): MedicalRecord!
  deleteMedicalRecordRow(rowId: String!): Boolean!
  signIn(input: SignInInput!): AuthPayload!
  refreshToken(input: RefreshTokenInput!): AuthTokens!
}
